<!DOCTYPE html>
<html>
<style>

div {
  padding: 10px;
}

button {
  margin-right: 15px;
}

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	var correctlyDoneTasks = 0;
	var wrongAttempts = 0;
	$("#correctTaskCompletedCount").text(`Правильно решено задач: ${correctlyDoneTasks}`)
	$("#wrongAttempts").text(`Неудачных попыток: ${wrongAttempts}`)
	$("#newTask").click(generateNewTask);
	$("#submit").click(checkResult);
	
	generateNewTask();
	
	function generateNewTask() {
	var amountOfNumbers = 3;
	$("#amountOfNumbers").val(amountOfNumbers);
	var sum;
	while (true) {
		sum = Math.floor(Math.random() * 300 + 25)
		if (sum % amountOfNumbers === 0) {
		break;
		}
	}
	$("#average").val(sum / amountOfNumbers);
	$("#sum").val(sum);
	
	var numbers = [];
	$("#numbers").val(numbers.length)
	while (numbers.length < amountOfNumbers) {
	
		// last number
		if (numbers.length === amountOfNumbers - 1) {
		numbers.push(sum - numbers.reduce((a, b) => a + b, 0));
		break;
		}
	
		var newNum = (Math.floor(Math.random() * sum / 2))
		while (newNum === 0) {
		newNum = (Math.floor(Math.random() * sum / 2))
		}
		numbers.push(newNum)
	
		var currentSum = numbers.reduce((a, b) => a + b, 0);
		if (currentSum >= sum) {
		numbers[numbers.length - 1] = Math.floor(numbers[numbers.length - 1] / 2)
		}
	}
	
	$("#numbers").val(numbers)
	
	var conditionedNumbers = []
	var firstNumber = numbers[0]
	for (let i = 1; i < amountOfNumbers; i++) {
		var secondNumber = numbers[i]
		if (firstNumber === secondNumber) {
	
		conditionedNumbers.push(` число №1 равно числу №${i+1} `)
	
		} else if (firstNumber > secondNumber) {
	
		if (firstNumber % secondNumber === 0) {
			conditionedNumbers.push(` число №1 больше числа №${i+1} в ${firstNumber / secondNumber} раз `)
		} else {
			conditionedNumbers.push(` число №1 больше числа №${i+1} на ${firstNumber - secondNumber}`)
		}
	
	
		} else {
	
		if (secondNumber % firstNumber === 0) {
			conditionedNumbers.push(` число №1 меньше числа №${i+1} в ${secondNumber / firstNumber} раз `)
		} else {
				conditionedNumbers.push(` число №1 меньше числа №${i+1} на ${secondNumber - firstNumber}`)
		}
		}
	}
	
	
	$("#task").text(`Среднее арифметическое ${amountOfNumbers} чисел равно ${$("#average").val()}.
	Найти числа, если известно, что${conditionedNumbers}`)
	
	
	}
	
	
	function checkResult() {
		if ($("#answer").val() !== "" && $("#answer").val() === $("#numbers").val()) {
			correctlyDoneTasks++;
			$("#correctTaskCompletedCount").text(`Правильно решено задач: ${correctlyDoneTasks}`)
			generateNewTask();
			$("#answer").val("")
		} else {
			alert("Задача решена неправильно")
			wrongAttempts++;
			$("#wrongAttempts").text(`Неудачных попыток: ${wrongAttempts}`)
		}
	}
});

</script>
<body>

<div style="display:none">
  <button id="newTask">Новая задача</button>
</div>
<div>
  <label id="correctTaskCompletedCount"></label>
  <br/>
  <label id="wrongAttempts"></label>
</div>

<div style="display:none">
  <label>Среднее арифметическое</label>
  <input id="average" disabled />
</div>
<div style="display:none">
  <label>Сумма чисел</label>
  <input id="sum" disabled />
</div>
<div style="display:none">
  <label>Количество чисел</label>
  <input id="amountOfNumbers" disabled />
</div>
<div style="display:none">
  <label>Числа</label>
  <input id="numbers" disabled />
</div>
<div style="border-style:solid; width:500px">
  <label id="task"></label>
</div>
<div>
  <label>Ответ (введи числа через запятую без пробелов):</label>
    <input id="answer" />
</div>
<div>
  <button id="submit">
    Ответить
  </button>
</div>


</body>
</html>
